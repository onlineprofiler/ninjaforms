function ninjaSetupPopups(){var a=settings.plugin_url+"/js/jquerybubblepopup-theme/";jQuery(".extra_email").CreateBubblePopup({innerHtml:"If this box is checked, NinjaForms will validate this input as an email address.",position:"right",align:"middle",tail:{align:"center",hidden:false},innerHtmlStyle:{width:"150px"},themeName:"all-black",themePath:a,closingDelay:700});jQuery(".send_email").CreateBubblePopup({innerHtml:"If this box is checked, NinjaForms will send a copy of this form (and any messages attached) to this address.",position:"right",align:"middle",tail:{align:"center",hidden:false},innerHtmlStyle:{width:"150px"},themeName:"all-black",themePath:a,closingDelay:700});jQuery(".show_rte").CreateBubblePopup({innerHtml:"If this box is checked, NinjaForms will use a Rich Text Editor in place of a standard multi-line textarea.",position:"right",align:"middle",tail:{align:"center",hidden:false},innerHtmlStyle:{width:"150px"},themeName:"all-black",themePath:a,closingDelay:700});jQuery(".show_upload").CreateBubblePopup({innerHtml:"If this box is checked, NinjaForms will allow users to upload and insert media into the post content. Use with caution.",position:"right",align:"middle",tail:{align:"center",hidden:false},innerHtmlStyle:{width:"150px"},themeName:"all-black",themePath:a,closingDelay:700});jQuery(".meta_key").CreateBubblePopup({innerHtml:"Since NinjaForms will be making a Post from this form, what meta_key should this field be attached to?",position:"right",align:"middle",tail:{align:"center",hidden:false},innerHtmlStyle:{width:"150px"},themeName:"all-black",themePath:a,closingDelay:700})}jQuery(document).ready(function(a){var f=settings.plugin_url+"/js/jquerybubblepopup-theme/";a("#show_help_color").CreateBubblePopup({innerHtml:"Sample Help Text",position:"right",align:"middle",tail:{align:"center",hidden:false},innerHtmlStyle:{width:settings.help_size+"px"},themeName:settings.help_color,themePath:f,closingDelay:1000});a("#reset_upload_dir").CreateBubblePopup({innerHtml:"Clicking this button will reset the upload directory to the NinjaForms default. Use it only if you break file uploads with a bad directory.",position:"right",align:"middle",tail:{align:"center",hidden:false},innerHtmlStyle:{width:settings.help_size+"px"},themeName:"all-black",themePath:f,closingDelay:1000});a("#license_key").CreateBubblePopup({innerHtml:"The license key is only used to enable automatic updates. If your site is behind a firewall or you are having trouble saving changes, leave this field blank.",position:"right",align:"middle",tail:{align:"center",hidden:false},innerHtmlStyle:{width:settings.help_size+"px"},themeName:"all-black",themePath:f,closingDelay:1000});a("#help_color").change(function(){a("#show_help_color").HideBubblePopup();var g=a("#help_color").val();var h=a("#help_size").val();h=h+"px";a("#show_help_color").SetBubblePopupOptions({innerHtml:"Sample Help Text",position:"right",align:"middle",tail:{align:"center",hidden:false},innerHtmlStyle:{width:h},themeName:g,themePath:f,closingDelay:200,distance:"120px"});a("#show_help_color").ShowBubblePopup();a("#show_help_color").FreezeBubblePopup()});a(".ninja_forms_settings").keyup(function(){a("#show_help_color").HideBubblePopup();var g=a("#help_color").val();var h=a("#help_size").val();h=h+"px";a("#show_help_color").SetBubblePopupOptions({innerHtml:"Sample Help Text",position:"right",align:"middle",tail:{align:"center",hidden:false},innerHtmlStyle:{width:h},themeName:g,themePath:f,closingDelay:200,distance:"120px"});a("#show_help_color").ShowBubblePopup();a("#show_help_color").FreezeBubblePopup()});a(window).load(function(){a("#show_help_color").ShowBubblePopup();a("#show_help_color").FreezeBubblePopup()});if(settings.admin_help=="checked"){ninjaSetupPopups();a("#save_subs").CreateBubblePopup({innerHtml:"If this box is checked, NinjaForms will save all user submissions.",position:"right",align:"middle",tail:{align:"center",hidden:false},innerHtmlStyle:{width:"150px"},themeName:"all-black",themePath:f,closingDelay:700});a("#send_email").CreateBubblePopup({innerHtml:"If this box is checked, NinjaForms will send an email to the user. \n Requires use of the 'Email' Pre-defined Field.",position:"right",align:"middle",tail:{align:"center",hidden:false},innerHtmlStyle:{width:"150px"},themeName:"all-black",themePath:f,closingDelay:700});a("#ajax").CreateBubblePopup({innerHtml:"If this box is checked, NinjaForms will submit the form without reloading the page. After a successful submission, the user will see the success message you have entered to the right.",position:"right",align:"middle",tail:{align:"center",hidden:false},innerHtmlStyle:{width:"150px"},themeName:"all-black",themePath:f,closingDelay:700});a("#landing_page").CreateBubblePopup({innerHtml:"Since we aren't submitting via Ajax, what page should users be redirected to after successfully submitting the form?",position:"right",align:"middle",tail:{align:"center",hidden:false},innerHtmlStyle:{width:"150px"},themeName:"all-black",themePath:f,closingDelay:700});a("#append_page").CreateBubblePopup({innerHtml:"If you want to automatically attach this form to a page, check the appropriate box below. It will be added after any page content and before the comments section (if there is one).",position:"right",align:"middle",tail:{align:"center",hidden:false},innerHtmlStyle:{width:"150px"},themeName:"all-black",themePath:f,closingDelay:700});a("#purge_fields").CreateBubblePopup({innerHtml:"If users submit a form, and later you remove a field from that same form, their submission will contain 'old fields'. NinjaForms remembers the values they submitted for those fields and will display those to you. This link will remove all of these 'old values'.",position:"right",align:"middle",tail:{align:"center",hidden:false},innerHtmlStyle:{width:"150px"},themeName:"all-black",themePath:f,closingDelay:700});a("#delete_subs").CreateBubblePopup({innerHtml:"This link will remove all user submissions for this form. Be careful, this can't be undone.",position:"right",align:"middle",tail:{align:"center",hidden:false},innerHtmlStyle:{width:"150px"},themeName:"all-black",themePath:f,closingDelay:700});a("#show_title").CreateBubblePopup({innerHtml:"Should NinjaForms show the form title when displaying this form?",position:"right",align:"middle",tail:{align:"center",hidden:false},innerHtmlStyle:{width:"150px"},themeName:"all-black",themePath:f,closingDelay:700});a("#show_desc").CreateBubblePopup({innerHtml:"Should NinjaForms show the form description when displaying this form? It will be placed immediately after the title.",position:"right",align:"middle",tail:{align:"center",hidden:false},innerHtmlStyle:{width:"150px"},themeName:"all-black",themePath:f,closingDelay:700});a("#mailto").CreateBubblePopup({innerHtml:"NinjaForms will send a copy of the form submission to everyone on this list. If you don't want the form to mail any results to you, then leave this list empty.",position:"right",align:"middle",tail:{align:"center",hidden:false},innerHtmlStyle:{width:"150px"},themeName:"all-black",themePath:f,closingDelay:700});a("#success_msg").CreateBubblePopup({innerHtml:"If your form is set to submit via Ajax, this message will appear after they have successfully filled out your form.",position:"right",align:"middle",tail:{align:"center",hidden:false},innerHtmlStyle:{width:"150px"},themeName:"all-black",themePath:f,closingDelay:700});a("#email_from").CreateBubblePopup({innerHtml:"Who should the email appear to be from?",position:"right",align:"middle",tail:{align:"center",hidden:false},innerHtmlStyle:{width:"150px"},themeName:"all-black",themePath:f,closingDelay:700});a("#email_msg").CreateBubblePopup({innerHtml:"This message will be displayed at the beginning of the email sent to the user.",position:"right",align:"middle",tail:{align:"center",hidden:false},innerHtmlStyle:{width:"150px"},themeName:"all-black",themePath:f,closingDelay:700});a("#email_fields").CreateBubblePopup({innerHtml:"These fields will be displayed as a table after your email message.",position:"right",align:"middle",tail:{align:"center",hidden:false},innerHtmlStyle:{width:"150px"},themeName:"all-black",themePath:f,closingDelay:700});a("#multi_form_help").CreateBubblePopup({innerHtml:"If this box is checked, NinjaForms will split your form display into several pages. You can then use the form dividers to separate form pages.",position:"right",align:"middle",tail:{align:"center",hidden:false},innerHtmlStyle:{width:"150px"},themeName:"all-black",themePath:f,closingDelay:700});a("#multi_form_steps").CreateBubblePopup({innerHtml:"This field places a step counter (i.e. Step 1 of 4 - Section Name) wherever you place it within your form. It is recommended that you place it at the top of your form.",position:"right",align:"middle",tail:{align:"center",hidden:false},innerHtmlStyle:{width:"150px"},themeName:"all-black",themePath:f,closingDelay:700});a("#multi_form_progressbar").CreateBubblePopup({innerHtml:"This field places a progress bar wherever you place it within the form. This bar fills as the user completes the form.",position:"right",align:"middle",tail:{align:"center",hidden:false},innerHtmlStyle:{width:"150px"},themeName:"all-black",themePath:f,closingDelay:700});a("#multi_form_divider").CreateBubblePopup({innerHtml:"This field is used to divide sections/pages for your multi-part form. It will also allow you to name each section/page.",position:"right",align:"middle",tail:{align:"center",hidden:false},innerHtmlStyle:{width:"150px"},themeName:"all-black",themePath:f,closingDelay:700});a("#create_post").CreateBubblePopup({innerHtml:"If this box is checked, NinjaForms will create a post from user input. Any non Post Element fields will be added as meta data. You can select the meta fields they map to within each field's options.",position:"right",align:"middle",tail:{align:"center",hidden:false},innerHtmlStyle:{width:"150px"},themeName:"all-black",themePath:f,closingDelay:700});a("#require_login").CreateBubblePopup({innerHtml:"If this box is checked, NinjaForms will require a user to be logged in to see the form and create a post from it. If it is unchecked, un-registered users can create posts.",position:"right",align:"middle",tail:{align:"center",hidden:false},innerHtmlStyle:{width:"150px"},themeName:"all-black",themePath:f,closingDelay:700});a("#post_as").CreateBubblePopup({innerHtml:"NinjaForms will assign this user as the author of posts it creates.",position:"right",align:"middle",tail:{align:"center",hidden:false},innerHtmlStyle:{width:"150px"},themeName:"all-black",themePath:f,closingDelay:700});a("#post_type").CreateBubblePopup({innerHtml:"NinjaForms will create a post of this type.",position:"right",align:"middle",tail:{align:"center",hidden:false},innerHtmlStyle:{width:"150px"},themeName:"all-black",themePath:f,closingDelay:700});a("#post_status").CreateBubblePopup({innerHtml:"NinjaForms will assign this status to each post it creates.",position:"right",align:"middle",tail:{align:"center",hidden:false},innerHtmlStyle:{width:"150px"},themeName:"all-black",themePath:f,closingDelay:700});a("#post_content").CreateBubblePopup({innerHtml:"This is the Post body. You have the option to turn on or off the Rich Text Editor within this field's options.",position:"right",align:"middle",tail:{align:"center",hidden:false},innerHtmlStyle:{width:"150px"},themeName:"all-black",themePath:f,closingDelay:700});a("#post_cat").CreateBubblePopup({innerHtml:"Creates a multi-select list of post categories. You can allow or disallow users to create new categories within this field's options.",position:"right",align:"middle",tail:{align:"center",hidden:false},innerHtmlStyle:{width:"150px"},themeName:"all-black",themePath:f,closingDelay:700})}a("#ninja_subs_table").tablesorter({widgets:["zebra"]});a(".ninja_help_open").live("click",function(g){g.preventDefault();a("#"+this.name).dialog("open")});a(".ninja_help_text").dialog({autoOpen:false,modal:false,width:450,position:"center"});a(".ninja-settings-list").sortable({placeholder:"sortable-placeholder",update:function(g,k){var h=a(k.item).attr("name");var j=a("#"+h).sortable("toArray");a.post(ajaxurl,{page:h,order:j,action:"ninja_save_settings_order"},function(l){})}});a(".handlediv").click(function(g){g.preventDefault();var h=this.id;var j=this.id.replace("handle-","");a("#"+j).toggle();if(a("#"+j).is(":visible")){var k="open";a(".handlediv").each(function(){if(this.id!=h){var l=this.id.replace("handle-","");if(a("#"+l).is(":visible")){a("#"+l).hide();var m=closed;a.post(ajaxurl,{item:l,state:m,action:"ninja_save_settings_state"},function(n){})}}})}else{var k="closed"}a.post(ajaxurl,{item:j,state:k,action:"ninja_save_settings_state"},function(l){})});window.onbeforeunload=function(){for(edId in tinyMCE.editors){if(tinyMCE.editors[edId].isDirty()){return"You have unsaved data, it will be lost if you don't click save."}}if(tinyMCE.activeEditor.isDirty()){}};a("input").live("change",function(){if(this.id!="begin_date"&&this.id!="end_date"){window.onbeforeunload=function(){return"You have unsaved data, it will be lost if you don't click save."}}});a("select").live("change",function(){if(this.id!="ninja_select_form"){window.onbeforeunload=function(){return"You have unsaved data, it will be lost if you don't click save."}}});a(".ninja_save_data").click(function(g){if(typeof(tinyMCE)!="undefined"){tinyMCE.triggerSave(true,true)}window.onbeforeunload=null});a(".ninja_field_label").live("keyup",function(){var g=this.id.replace("field_","");g=g.replace("[label]","");var h=a("#ninja_field_"+g+"_type").val();if(this.value!=""){var j=this.value}else{var j=h}if(h!="desc"&&h!="spam"){a("#field_title_"+g).prop("innerHTML",j)}});a("#ninja_multi_part").change(function(){a("#ninja_multi_options").toggle()});a(".ninja_list_type").live("change",function(){var g=this.id.replace("[extra][list_type]","");if(this.value=="radio"){a("#"+g+"\\[extra\\]\\[label_pos\\]").prop("value","above");a("#"+g+"\\[extra\\]\\[label_pos\\] option[value='left']").remove();a("#"+g+"\\[extra\\]\\[label_pos\\] option[value='right']").remove();a("#"+g+"\\[extra\\]\\[label_pos\\] option[value='inside']").remove()}else{if(!a("#"+g+"\\[extra\\]\\[label_pos\\] option[value='left']").val()){a("#"+g+"\\[extra\\]\\[label_pos\\]").append("<option value='left'>Left of Element</option>")}if(!a("#"+g+"\\[extra\\]\\[label_pos\\] option[value='right']").val()){a("#"+g+"\\[extra\\]\\[label_pos\\]").append("<option value='right'>Right of Element</option>")}if(!a("#"+g+"\\[extra\\]\\[label_pos\\] option[value='inside']").val()){a("#"+g+"\\[extra\\]\\[label_pos\\]").append("<option value='inside'>Inside Element</option>")}}});a("#ninja_select_all").click(function(){if(this.checked){a(".ninja_checkbox").each(function(){a(this).prop("checked",true)})}else{a(".ninja_checkbox").each(function(){a(this).prop("checked",false)})}});a("#export_subs_submit").click(function(j){var k=a("#form_id").val();var g=a("#begin_date").val();var h=a("#end_date").val();a.post(ajaxurl,{form_id:k,begin_date:g,end_date:h,action:"ninja_check_subs"},function(l){if(l=="found"){a("#submit").click()}else{alert("No submissions found")}})});a("input.date").datepicker();a(".ninja_sub_more").click(function(){var g=this.id.replace("more_","");if(a("#sub_"+g+"_more").is(":visible")||a("#sub_"+g+"_old").is(":visible")){a(this).prop("innerHTML","More")}else{a(this).prop("innerHTML","Less")}a("#sub_"+g+"_more").toggle();a("#sub_"+g+"_old").toggle()});a(".ninja_purge_old_fields").click(function(k){k.preventDefault();var l=this.id.replace("purge_old_fields_","");var j=this;var h=this.id;var g=confirm("Delete all form submissions? This is permanent and cannot be undone.");a(this).replaceWith('<img id="'+h+'"src="'+settings.plugin_url+'/images/ajax-loader.gif">');if(g==true){a.post(ajaxurl,{id:l,action:"ninja_purge_fields"},function(m){window.location.reload()})}else{a("#"+h).replaceWith(j)}});a(".ninja_delete_all_subs").click(function(k){k.preventDefault();var l=this.id.replace("delete_all_subs_","");var j=this;var h=this.id;var g=confirm("Delete all form submissions? This is permanent and cannot be undone.");a(this).replaceWith('<img id="'+h+'"src="'+settings.plugin_url+'/images/ajax-loader.gif">');if(g==true){a.post(ajaxurl,{id:l,action:"ninja_delete_all_subs"},function(m){window.location.reload()})}else{a("#"+h).replaceWith(j)}});a(".ninja_delete_sub").click(function(k){k.preventDefault();var l=this.id.replace("sub_","");var j=this;var h=this.id;var g=confirm("Delete this submission? This is permanent and cannot be undone.");a(this).replaceWith('<img id="'+h+'"src="'+settings.plugin_url+'/images/ajax-loader.gif">');if(g==true){a.post(ajaxurl,{id:l,action:"ninja_delete_sub"},function(m){a(".sub_tr_"+l).remove()})}else{a("#"+h).replaceWith(j)}});a(".ninja_form_send_email").change(function(){a("#ninja_advanced_email").toggle()});a(".ninja_form_hidden").live("change",function(){var g=this.id.replace("field_","");g=g.replace("[value]","");if(this.value=="ninja_custom"){a("#ninja_form_hidden_"+g).show();a("#field_"+g+"\\[value\\]\\[text\\]").val("")}else{a("#field_"+g+"\\[value\\]\\[text\\]").val(this.value);a("#ninja_form_hidden_"+g).hide()}});a(".ninja_label_pos").live("change",function(){var g=this.id.replace("[extra][label_pos]","");var h=g.replace("field_","");var j=a("#ninja_field_"+h+"_type").val();if(this.value=="inside"){if(j!="spam"){a("#"+g+"\\[value\\]").val("");a("#"+g+"\\[value\\]").prop("disabled",true)}}});a(".ninja_new_form").click(function(){window.location="admin.php?page=ninja-custom-forms&ninja_form_id=new"});a(".ninja_remove_mailto_item").live("click",function(g){g.preventDefault();var h=this.id.split("_");var j=h[3];a("#mailto_item_"+j+"_li").remove()});a(".ninja_add_mailto").live("click",function(h){h.preventDefault();var l=this.id.split("_");var j=l[2];var g=a("#mailto_list").children().length;var k='<li id="mailto_item_'+g+'_li" name="mailto_item_'+g+'_li"><input type="text" class="code" name="mailto_item_'+g+'" id="mailto_item_'+g+'" value="" /><span class=""> <a href="#" id="remove_mailto_item_'+g+'" name="remove_mailto_item_'+g+'" class="deletion ninja_remove_mailto_item">Remove</a></span></li>';a("#mailto_list").append(k);a("#mailto_item_"+g).focus()});a(".ninja_form_ajax").change(function(){var g=this.id.replace("form_","");g=g.replace("[ajax]","");if(!this.checked){a("#form_"+g+"\\[landing_page\\]\\[label\\]").show()}else{a("#form_"+g+"\\[landing_page\\]\\[label\\]").hide()}});a(".ninja_form_append_page").change(function(){var g=this.id.replace("form_","");g=g.replace("[append_page]","");if(this.checked){a("#form_"+g+"\\[append_page_id\\]\\[label\\]").show()}else{a("#form_"+g+"\\[append_page_id\\]\\[label\\]").hide()}});a("#ninja_select_form").change(function(){window.location.replace(this.value)});a(".ninja_select_item_default").live("click",function(h){var k=this.id.split("_");var j=k[3];var l=k[4];var g=a("#select_items_"+j).children().length;g=g+1;if(this.checked){for(i=0;i<g;i++){if(l!=i){a("#select_item_default_"+j+"_"+i).prop("checked",false)}}var m=a("#field_"+j+"\\[extra\\]\\[list_item\\]\\["+l+"\\]").val();a("#field_"+j+"\\[extra\\]\\[list_default\\]").val(m)}});a(".ninja_add_select_item").live("click",function(h){h.preventDefault();var k=this.id.replace("add_select_item_","");var g=a("#select_items_"+k).children().length;var l=g+1;var j='<li id="select_item_'+k+"_"+l+'" name="select_item_'+k+"_"+l+'"><input type="text" class="code" name="field_'+k+"[extra][list_item]["+l+']" id="field_'+k+"[extra][list_item]["+l+']" value="" /> <span class="menu-item-handle">Drag | <a href="#" id="remove_select_item_'+k+"_"+l+'" name="remove_select_item_'+k+"_"+l+'" class="deletion ninja_remove_select_item">Remove</a> | <label for="select_item_default_'+k+"_"+l+'">Selected</label> <input type="checkbox" class="ninja_select_item_default" value="checked" id="select_item_default_'+k+"_"+l+'" name="select_item_default_'+k+"_"+l+'"></span></li>';a("#select_items_"+k).append(j);a("#select_items_"+k).sortable({handle:".menu-item-handle",placeholder:"sortable-placeholder"});a("#field_"+k+"\\[extra\\]\\[list_item\\]\\["+l+"\\]").focus()});a(".ninja_remove_select_item").live("click",function(g){g.preventDefault();var h=this.id.replace("remove_","");a("#"+h).remove()});a(".ninja_hide").hide();a(".ninja_select_items").sortable({handle:".menu-item-handle",placeholder:"sortable-placeholder"});a(".ninja_datepicker").live("click",function(){var g=this.id.replace("field_","");g=g.replace("[extra][datepicker]","");if(this.checked){a("#field_mask_select_"+g).val("none");a("#field_"+g+"\\[extra\\]\\[mask\\]").val("none");a("#field_mask_"+g+"_cont").hide();a("#field_"+g+"\\[extra\\]\\[email\\]").prop("checked",false);a("#field_"+g+"\\[extra\\]\\[send_email\\]").prop("checked",false);a("#field_send_email_"+g+"_cont").hide()}});a(".ninja_email").live("click",function(){var g=this.id.replace("field_","");g=g.replace("[extra][email]","");if(this.checked){a("#field_mask_select_"+g).val("none");a("#field_"+g+"\\[extra\\]\\[mask\\]").val("none");a("#field_mask_"+g+"_cont").hide();a("#field_"+g+"\\[extra\\]\\[datepicker\\]").attr("checked",false);a("#field_send_email_"+g+"_cont").show()}else{a("#field_send_email_"+g+"_cont").hide();a("#field_"+g+"\\[extra\\]\\[send_email\\]").attr("checked",false)}});a(".ninja_mask_select").live("change",function(){var g=this.id.replace("field_mask_select_","");if(this.value!="none"){a("#field_"+g+"\\[extra\\]\\[datepicker\\]").attr("checked",false);a("#field_"+g+"\\[extra\\]\\[email\\]").attr("checked",false);a("#field_"+g+"\\[extra\\]\\[send_email\\]").attr("checked",false);a("#field_send_email_"+g+"_cont").hide()}if(this.value=="custom"){a("#field_"+g+"\\[extra\\]\\[mask\\]").val("");a("#field_mask_"+g+"_cont").show()}else{a("#field_"+g+"\\[extra\\]\\[mask\\]").val(this.value);a("#field_mask_"+g+"_cont").hide()}});a(".ninja_default_select").live("change",function(){var g=this.id.replace("field_default_select_","");if(this.value=="custom"){a("#field_"+g+"\\[value\\]").val("");a("#field_default_"+g+"_cont").show()}else{a("#field_"+g+"\\[value\\]").val(this.value);a("#field_default_"+g+"_cont").hide()}});a(".ninja_field_delete").live("click",function(l){l.preventDefault();var g=this.name;var m=this.name.split("_");m=m[2];var k=this;var j=this.id;var n=this.id.replace("ninja_field_delete_","");var h=confirm("Remove this field? It will be removed even if you do not save.");a(this).replaceWith('<img id="'+j+'"src="'+settings.plugin_url+'/images/ajax-loader.gif">');if(h==true){a.post(ajaxurl,{id:n,action:"ninja_delete_field"},function(o){a("#field_"+n).remove();if(m=="submit"||m=="spam"||m=="progressbar"||m=="steps"||m=="posttitle"||m=="postcontent"||m=="postexcerpt"||m=="postcat"||m=="posttags"){a("#"+g+"_cont").show()}})}else{a("#"+j).replaceWith(k)}});a(".ninja_form_delete").live("click",function(){var j=this;var h=this.id;var k=this.id.replace("ninja_form_delete_","");var g=confirm("Delete this form? This is permanent and will remove all fields associated with the form.");a(this).replaceWith('<img id="'+h+'"src="'+settings.plugin_url+'/images/ajax-loader.gif">');if(g==true){a.post(ajaxurl,{id:k,action:"ninja_delete_form"},function(l){window.location="admin.php?page=ninja-custom-forms"})}else{a("#"+h).replaceWith(j)}});a(".ninja_new_field").live("click",function(j){j.preventDefault();var h=this;var g=this.id;a(this).replaceWith('<img id="'+g+'" src="'+settings.plugin_url+'/images/ajax-loader.gif">');var m=this.id.split("_");var k=m[2];var l=m[3];a.post(ajaxurl,{action:"ninja_new_field",type:k,form_id:l},function(p){if(k=="desc"){window.onbeforeunload=function(){};a("#ninja_form_fields").submit()}else{var o=p.split("<----new----ninja----field---->");var n="field_"+o[0]+"[value]";a("#ninja_edit_form_fields").append(o[1]);a("#field_"+o[0]+"\\[label\\]").focus();a("#"+g).replaceWith(h);if(k=="spam"||k=="submit"||k=="progressbar"||k=="steps"||k=="posttitle"||k=="postcontent"||k=="postexcerpt"||k=="postcat"||k=="posttags"){a("#"+g+"_cont").hide()}ninjaSetupPopups()}})});var d="#menu-settings-column";if(a(d).length>0){var e=a(d).offset();var c=e.top;var b=a(d).height();a(window).scroll(function(){var j=a(window).scrollTop();var g=j;if(g>c){var h=g+10}else{var h=c}a(d).offset({top:h})})}a(".item-edit").live("click",function(h){h.preventDefault();var j=this.id.replace("edit-","");var k=a("#ninja_field_"+j+"_type").val();var g="field_"+j+"[value]";if(a("#field_"+j).hasClass("menu-item-edit-inactive")){a("#field_"+j).removeClass("menu-item-edit-inactive");a("#field_"+j).addClass("menu-item-edit-active")}else{a("#field_"+j).removeClass("menu-item-edit-active");a("#field_"+j).addClass("menu-item-edit-inactive")}});a("#ninja_edit_form_fields").sortable({handle:".menu-item-handle",placeholder:"sortable-placeholder",update:function(g,h){window.onbeforeunload=function(){return"You have unsaved data, it will be lost if you don't click save."}},start:function(g,l){var j=a(l.item).prop("id");var k=a("#ninja_"+j+"_type").val();var h=j+"[value]";if(!tinyMCE.editors[h]){h=j+"value"}window.ninja_editor_id=h;if(k=="desc"){tinyMCE.execCommand("mceRemoveControl",false,h)}},stop:function(g,l){var j=a(l.item).prop("id");var k=a("#ninja_"+j+"_type").val();var h=window.ninja_editor_id;if(k=="desc"){tinyMCE.execCommand("mceAddControl",true,h)}a(this).sortable("refresh")}});a("#ninja_form_fields").submit(function(){var g=a("#ninja_edit_form_fields").sortable("toArray");a("#ninja_form_fields_order").val(g)});a("#ninja_form_settings").submit(function(){var h=0;a("#mailto_list > li").each(function(){var j=this.id.replace("_li","");if(h==0){tmp=a("#"+j).val()}else{tmp=tmp+","+a("#"+j).val()}h=h+1});var g=a("#ninja_form_id").val();a("#form_"+g+"\\[mailto\\]").val(tmp)});if(a("#ninja_form_saved")){a("#ninja_form_saved").show(400).delay(10000).slideUp("slow")}a("#ninja_form_post").change(function(){if(this.checked){a(".ninja_post_options").show()}else{a(".ninja_post_options").hide()}});a(".ninja-reset-upload-dir").click(function(){var g=confirm("Reset uploads directory to NinjaForms default?");if(g){a("#plugin_settings_upload_dir").val(this.id)}});a(".ninja-rte-checkbox").live("change",function(){var g=this.id.replace("field_","");g=g.replace("[extra][rte]","");if(this.checked){a("#field_"+g+"\\[extra\\]\\[media_upload\\]_cont").show()}else{a("#field_"+g+"\\[extra\\]\\[media_upload\\]_cont").hide()}});a('[title = "Media Uploader - NinjaForms"]').live("mousedown",function(){var g=this.id.replace("-add_media","");tinyMCE.execInstanceCommand(g,"mceFocus")});a(".ninja-advanced").live("click",function(g){g.preventDefault();a("#"+this.id+"_cont").toggle()});a(".ninja-save-status").change(function(){if(this.checked){a("#ninja_save_status_options").show()}else{a("#ninja_save_status_options").hide()}})});